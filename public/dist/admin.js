!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8)}([function(e,t){e.exports=window.React},function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.apiFetch},function(e,t,r){"use strict";r.r(t),r.d(t,"createProposal",(function(){return u})),r.d(t,"updateProposalStatus",(function(){return a})),r.d(t,"queryProposals",(function(){return c}));var n=r(2),o=r.n(n);const i=e=>`${Compart.rest_namespace}${e}`,u=e=>o()({path:i("/proposals"),method:"POST",data:{text:e}}),a=(e,t)=>o()({path:i("/proposals/"+e),method:"PATCH",data:{status:t}}),c=({page:e=1,items_per_page:t=50,search:r="",user_id:n=0}={})=>{const u=[];return e&&u.push("page="+e),t&&u.push("items_per_page="+t),r.length&&u.push("search="+encodeURIComponent(r)),n&&u.push("user_id="+n),o()({path:i("/proposals?"+u.join("&"))})}},function(e,t){e.exports=window.ReactDOM},function(e,t){e.exports=window.wp.domReady},function(e,t){function r(){return e.exports=r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,r.apply(this,arguments)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0},,function(e,t,r){"use strict";r.r(t);var n=r(1),o=r(0),i=r(4),u=r(5),a=r.n(u),c=r(3),s=r(6),f=r.n(s),l=Object.prototype.hasOwnProperty,d=new WeakMap,p=0,v=function(){function e(e){void 0===e&&(e={}),this.cache=new Map(Object.entries(e)),this.subs=[]}return e.prototype.get=function(e){var t=this.serializeKey(e)[0];return this.cache.get(t)},e.prototype.set=function(e,t){var r=this.serializeKey(e)[0];this.cache.set(r,t),this.notify()},e.prototype.keys=function(){return Array.from(this.cache.keys())},e.prototype.has=function(e){var t=this.serializeKey(e)[0];return this.cache.has(t)},e.prototype.clear=function(){this.cache.clear(),this.notify()},e.prototype.delete=function(e){var t=this.serializeKey(e)[0];this.cache.delete(t),this.notify()},e.prototype.serializeKey=function(e){var t=null;if("function"==typeof e)try{e=e()}catch(t){e=""}return Array.isArray(e)?(t=e,e=function(e){if(!e.length)return"";for(var t="arg",r=0;r<e.length;++r)if(null!==e[r]){var n=void 0;"object"!=typeof e[r]&&"function"!=typeof e[r]?n="string"==typeof e[r]?'"'+e[r]+'"':String(e[r]):d.has(e[r])?n=d.get(e[r]):(n=p,d.set(e[r],p++)),t+="@"+n}else t+="@null";return t}(e)):e=String(e||""),[e,t,e?"err@"+e:"",e?"validating@"+e:""]},e.prototype.subscribe=function(e){var t=this;if("function"!=typeof e)throw new Error("Expected the listener to be a function.");var r=!0;return this.subs.push(e),function(){if(r){r=!1;var n=t.subs.indexOf(e);n>-1&&(t.subs[n]=t.subs[t.subs.length-1],t.subs.length--)}}},e.prototype.notify=function(){for(var e=0,t=this.subs;e<t.length;e++)(0,t[e])()},e}(),h=!0,y={isOnline:function(){return h},isDocumentVisible:function(){return"undefined"==typeof document||void 0===document.visibilityState||"hidden"!==document.visibilityState},fetcher:function(e){return fetch(e).then((function(e){return e.json()}))},registerOnFocus:function(e){"undefined"!=typeof window&&void 0!==window.addEventListener&&"undefined"!=typeof document&&void 0!==document.addEventListener&&(document.addEventListener("visibilitychange",(function(){return e()}),!1),window.addEventListener("focus",(function(){return e()}),!1))},registerOnReconnect:function(e){"undefined"!=typeof window&&void 0!==window.addEventListener&&(window.addEventListener("online",(function(){h=!0,e()}),!1),window.addEventListener("offline",(function(){return h=!1}),!1))}},b=function(){return(b=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},g=new v,m="undefined"!=typeof window&&navigator.connection&&-1!==["slow-2g","2g"].indexOf(navigator.connection.effectiveType),O=b({onLoadingSlow:function(){},onSuccess:function(){},onError:function(){},onErrorRetry:function(e,__,t,r,n){if(t.isDocumentVisible()&&!("number"==typeof t.errorRetryCount&&n.retryCount>t.errorRetryCount)){var o=Math.min(n.retryCount,8),i=~~((Math.random()+.5)*(1<<o))*t.errorRetryInterval;setTimeout(r,i,n)}},errorRetryInterval:1e3*(m?10:5),focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:1e3*(m?5:3),refreshInterval:0,revalidateOnFocus:!0,revalidateOnReconnect:!0,refreshWhenHidden:!1,refreshWhenOffline:!1,shouldRetryOnError:!0,suspense:!1,compare:function e(t,r){var n,o;if(t===r)return!0;if(t&&r&&(n=t.constructor)===r.constructor){if(n===Date)return t.getTime()===r.getTime();if(n===RegExp)return t.toString()===r.toString();if(n===Array){if((o=t.length)===r.length)for(;o--&&e(t[o],r[o]););return-1===o}if(!n||"object"==typeof t){for(n in o=0,t){if(l.call(t,n)&&++o&&!l.call(r,n))return!1;if(!(n in r)||!e(t[n],r[n]))return!1}return Object.keys(r).length===o}}return t!=t&&r!=r},isPaused:function(){return!1}},y),w="undefined"==typeof window||!!("undefined"!=typeof Deno&&Deno&&Deno.version&&Deno.version.deno),j=w?null:window.requestAnimationFrame?function(e){return window.requestAnimationFrame(e)}:function(e){return setTimeout(e,1)},x=w?o.useEffect:o.useLayoutEffect,E=Object(o.createContext)({});E.displayName="SWRConfigContext";var P,R=E,S=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function u(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(u,a)}c((n=n.apply(e,t||[])).next())}))},T=function(e,t){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!((o=(o=u.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},_={},C={},V={},I={},M={},k={},D={},L=(P=0,function(){return++P});if(!w){var z=function(e){if(O.isDocumentVisible()&&O.isOnline())for(var t in e)e[t][0]&&e[t][0]()};"function"==typeof O.registerOnFocus&&O.registerOnFocus((function(){return z(V)})),"function"==typeof O.registerOnReconnect&&O.registerOnReconnect((function(){return z(I)}))}var F=function(e,t){void 0===t&&(t=!0);var r=g.serializeKey(e),n=r[0],o=r[2],i=r[3];if(!n)return Promise.resolve();var u=M[n];if(n&&u){for(var a=g.get(n),c=g.get(o),s=g.get(i),f=[],l=0;l<u.length;++l)f.push(u[l](t,a,c,s,l>0));return Promise.all(f).then((function(){return g.get(n)}))}return Promise.resolve(g.get(n))},K=function(e,t,r,n){var o=M[e];if(e&&o)for(var i=0;i<o.length;++i)o[i](!1,t,r,n)},W=function(e,t,r){return void 0===r&&(r=!0),S(void 0,void 0,void 0,(function(){var n,o,i,u,a,c,s,f,l,d,p,v,h;return T(this,(function(y){switch(y.label){case 0:if(n=g.serializeKey(e),o=n[0],i=n[2],!o)return[2];if(void 0===t)return[2,F(e,r)];if(k[o]=L()-1,D[o]=0,u=k[o],a=C[o],f=!1,t&&"function"==typeof t)try{t=t(g.get(o))}catch(e){t=void 0,s=e}if(!t||"function"!=typeof t.then)return[3,5];f=!0,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,t];case 2:return c=y.sent(),[3,4];case 3:return l=y.sent(),s=l,[3,4];case 4:return[3,6];case 5:c=t,y.label=6;case 6:if((d=function(){if(u!==k[o]||a!==C[o]){if(s)throw s;return!0}})())return[2,c];if(void 0!==c&&g.set(o,c),g.set(i,s),D[o]=L()-1,!f&&d())return[2,c];if(p=M[o]){for(v=[],h=0;h<p.length;++h)v.push(p[h](!!r,c,s,void 0,h>0));return[2,Promise.all(v).then((function(){if(s)throw s;return g.get(o)}))]}if(s)throw s;return[2,c]}}))}))};Object.defineProperty(R.Provider,"default",{value:O}),R.Provider;var A=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],i=Object.assign({},O,Object(o.useContext)(R),t.length>2?t[2]:2===t.length&&"object"==typeof t[1]?t[1]:{}),u=t.length>2||2===t.length&&"function"==typeof t[1]||null===t[1]?t[1]:i.fetcher,a=g.serializeKey(n),c=a[0],s=a[1],f=a[2],l=a[3],d=Object(o.useRef)(i);x((function(){d.current=i}));var p=function(){return i.revalidateOnMount||!i.initialData&&void 0===i.revalidateOnMount},v=function(){var e=g.get(c);return void 0===e?i.initialData:e},h=function(){return!!g.get(l)||c&&p()},y=v(),b=g.get(f),m=h(),E=Object(o.useRef)({data:!1,error:!1,isValidating:!1}),P=Object(o.useRef)({data:y,error:b,isValidating:m});Object(o.useDebugValue)(P.current.data);var z,F,A=Object(o.useState)({})[1],q=Object(o.useCallback)((function(e){var t=!1;for(var r in e)P.current[r]!==e[r]&&(P.current[r]=e[r],E.current[r]&&(t=!0));if(t){if(H.current||!$.current)return;A({})}}),[]),H=Object(o.useRef)(!1),N=Object(o.useRef)(c),$=Object(o.useRef)(!1),B=Object(o.useCallback)((function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];H.current||$.current&&c===N.current&&(t=d.current)[e].apply(t,r)}),[c]),G=Object(o.useCallback)((function(e,t){return W(N.current,e,t)}),[]),U=function(e,t){return e[c]?e[c].push(t):e[c]=[t],function(){var r=e[c],n=r.indexOf(t);n>=0&&(r[n]=r[r.length-1],r.pop())}},J=Object(o.useCallback)((function(t){return void 0===t&&(t={}),S(e,void 0,void 0,(function(){var e,r,n,o,a,p,v,h,y,b;return T(this,(function(m){switch(m.label){case 0:if(!c||!u)return[2,!1];if(H.current)return[2,!1];if(d.current.isPaused())return[2,!1];e=t.retryCount,r=void 0===e?0:e,n=t.dedupe,o=void 0!==n&&n,a=!0,p=void 0!==_[c]&&o,m.label=1;case 1:return m.trys.push([1,6,,7]),q({isValidating:!0}),g.set(l,!0),p||K(c,P.current.data,P.current.error,!0),v=void 0,h=void 0,p?(h=C[c],[4,_[c]]):[3,3];case 2:return v=m.sent(),[3,5];case 3:return i.loadingTimeout&&!g.get(c)&&setTimeout((function(){a&&B("onLoadingSlow",c,i)}),i.loadingTimeout),_[c]=null!==s?u.apply(void 0,s):u(c),C[c]=h=L(),[4,_[c]];case 4:v=m.sent(),setTimeout((function(){delete _[c],delete C[c]}),i.dedupingInterval),B("onSuccess",v,c,i),m.label=5;case 5:return C[c]>h?[2,!1]:k[c]&&(h<=k[c]||h<=D[c]||0===D[c])?(q({isValidating:!1}),[2,!1]):(g.set(f,void 0),g.set(l,!1),y={isValidating:!1},void 0!==P.current.error&&(y.error=void 0),i.compare(P.current.data,v)||(y.data=v),i.compare(g.get(c),v)||g.set(c,v),q(y),p||K(c,v,y.error,!1),[3,7]);case 6:return b=m.sent(),delete _[c],delete C[c],d.current.isPaused()?(q({isValidating:!1}),[2,!1]):(g.set(f,b),P.current.error!==b&&(q({isValidating:!1,error:b}),p||K(c,void 0,b,!1)),B("onError",b,c,i),i.shouldRetryOnError&&B("onErrorRetry",b,c,i,J,{retryCount:r+1,dedupe:!0}),[3,7]);case 7:return a=!1,[2,!0]}}))}))}),[c]);if(x((function(){if(c){H.current=!1;var e=$.current;$.current=!0;var t=P.current.data,r=v();N.current=c,i.compare(t,r)||q({data:r});var n=function(){return J({dedupe:!0})};(e||p())&&(void 0===r||w?n():j(n));var o=!1,u=U(V,(function(){!o&&d.current.revalidateOnFocus&&(o=!0,n(),setTimeout((function(){return o=!1}),d.current.focusThrottleInterval))})),a=U(I,(function(){d.current.revalidateOnReconnect&&n()})),s=U(M,(function(e,t,r,o,u){void 0===e&&(e=!0),void 0===u&&(u=!0);var a={},c=!1;return void 0===t||i.compare(P.current.data,t)||(a.data=t,c=!0),P.current.error!==r&&(a.error=r,c=!0),void 0!==o&&P.current.isValidating!==o&&(a.isValidating=o,c=!0),c&&q(a),!!e&&(u?n():J())}));return function(){q=function(){return null},H.current=!0,u(),a(),s()}}}),[c,J]),x((function(){var t=null,r=function(){return S(e,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return P.current.error||!d.current.refreshWhenHidden&&!d.current.isDocumentVisible()||!d.current.refreshWhenOffline&&!d.current.isOnline()?[3,2]:[4,J({dedupe:!0})];case 1:e.sent(),e.label=2;case 2:return d.current.refreshInterval&&t&&(t=setTimeout(r,d.current.refreshInterval)),[2]}}))}))};return d.current.refreshInterval&&(t=setTimeout(r,d.current.refreshInterval)),function(){t&&(clearTimeout(t),t=null)}}),[i.refreshInterval,i.refreshWhenHidden,i.refreshWhenOffline,J]),i.suspense){if(z=g.get(c),F=g.get(f),void 0===z&&(z=y),void 0===F&&(F=b),void 0===z&&void 0===F){if(_[c]||J(),_[c]&&"function"==typeof _[c].then)throw _[c];z=_[c]}if(void 0===z&&F)throw F}var Q=Object(o.useMemo)((function(){var e={revalidate:J,mutate:G};return Object.defineProperties(e,{error:{get:function(){return E.current.error=!0,i.suspense?F:N.current===c?P.current.error:b},enumerable:!0},data:{get:function(){return E.current.data=!0,i.suspense?z:N.current===c?P.current.data:y},enumerable:!0},isValidating:{get:function(){return E.current.isValidating=!0,!!c&&P.current.isValidating},enumerable:!0}}),e}),[J,y,b,G,c,i.suspense,F,z]);return Q},q=({children:e})=>Object(n.createElement)("ul",null,e),H=({id:e,user:t,text:r,status:o})=>{const i=t&&t.email?t.email:"";return Object(n.createElement)("li",null,Object(n.createElement)("label",null,e,": ",i," ",o,Object(n.createElement)("br",null),Object(n.createElement)("textarea",{readOnly:!0,value:r})))},N=()=>{const{page:e,setPage:t}=Object(n.useState)(1),{result:r,numberOfItems:o}=(e=>{var t,r;const{data:n,error:o}=A([e],e=>Object(c.queryProposals)({page:e}));return{result:null!==(t=null==n?void 0:n.result)&&void 0!==t?t:[],numberOfItems:null!==(r=null==n?void 0:n.number_of_items)&&void 0!==r?r:0,isLoading:!o&&!n,isError:o}})(e);return Object(n.createElement)("div",{className:"wrap"},Object(n.createElement)(q,null,r.map(e=>Object(n.createElement)(H,f()({key:e.id},e)))))};a()((function(){Compart.api=c;const e=document.getElementById("community-proposals");Object(i.render)(Object(n.createElement)(N,null),e)}))}]);