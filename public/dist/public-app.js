!function(){var t={403:function(){document.addEventListener("DOMContentLoaded",(()=>{const t=Compart.api,e=(t,e)=>("boolean"==typeof e&&(e?(t.setAttribute("data-is-submitting","true"),document.body.classList.add("compart-user-proposal__is-submitting")):(t.removeAttribute("data-is-submitting"),document.body.classList.remove("compart-user-proposal__is-submitting"))),"true"===t.getAttribute("data-is-submitting"));document.body.addEventListener("submit",(function(a){const r=a.target,n=r.closest("[data-compart-user-proposal-component]");if(!n)return;if(a.preventDefault(),e(n))return;const i=r.querySelector("[name='compart_proposal']"),s=i.value;"string"!=typeof s||s.length<=0||(i.disabled=!0,e(n,!0),t.createProposal(s).then((t=>(i.removeAttribute("disabled"),i.value="",e(n,!1),t))).then(o(n,s)))}));const o=(t,e)=>o=>{t.querySelector("form").style.display="none",o.success?(t.querySelector("[data-compart-proposal-preview]").value=e,t.querySelector("[data-compart-proposal-success]").style.display="inherit"):t.querySelector("[data-compart-proposal-error]").style.display="inherit"}}))},55:function(){document.addEventListener("DOMContentLoaded",(()=>{const t=Compart.api,e=t=>"true"===t.getAttribute("data-is-voted"),o=t=>parseInt(t.getAttribute("data-reactions-count")),a=(t,e)=>t.setAttribute("data-reactions-count",e),r=(t,e)=>("boolean"==typeof e&&(e?(document.body.classList.add("compart-voting__is-loading"),t.setAttribute("data-is-loading","true")):(document.body.classList.remove("compart-voting__is-loading"),t.removeAttribute("data-is-loading"))),"true"===t.getAttribute("data-is-loading")),n=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const r=o(t);a(t,r+e)},i=(t,o)=>{(t=>t.querySelectorAll("[data-proposal-id]"))(t).forEach((t=>{e(t)&&((t=>{t.removeAttribute("data-is-voted")})(t),n(t,-1))})),o.forEach((e=>{const o=((t,e)=>t.querySelector(`[data-proposal-id='${e}']`))(t,e);(t=>{t.setAttribute("data-is-voted","true")})(o),n(o)}))};document.querySelectorAll("[data-voting-id][data-voting-status='open']").forEach((async o=>{try{await async function(o){const a=o.getAttribute("data-voting-id");r(o,!0);const n=(await t.queryVoting(a)).filter((t=>void 0!==t.userId)).map((t=>t.proposalId));i(o,n),r(o,!1),o.addEventListener("click",(function(s){const d=s.target.closest("[data-proposal-id]");d&&(async()=>{r(o,!0);const s=(t=>t.getAttribute("data-proposal-id"))(d),c=e(d);i(o,c?[]:[s]);try{let e="";c?(await t.unvoteForProposal(a,s),e="compart_unvoted"):(await t.voteForProposal(a,s,"up"),e="compart_voted"),document.dispatchEvent(new CustomEvent(e,{voting:o,votingId:a,proposalId:s}))}catch(t){i(o,n)}finally{r(o,!1)}})()}))}(o)}catch(t){console.error(t)}}))}))}},e={};function o(a){var r=e[a];if(void 0!==r)return r.exports;var n=e[a]={exports:{}};return t[a](n,n.exports,o),n.exports}o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,{a:e}),e},o.d=function(t,e){for(var a in e)o.o(e,a)&&!o.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";o(403),o(55)}()}();